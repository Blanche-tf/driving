Simple.Module({name:"jiakao:router/error",require:[]},function(e,t,o,r){var i=function(e,t){t.send({code:404,type:"file",context:"static:404.html"})};t.exports={c404:i}});
Simple.Module({name:"jiakao:router/main",require:["./base/assets","./base/default","./club/main","./detail/main"]},function(a,e,i,s){s.Router;a("./base/assets"),a("./base/default"),a("./club/main"),a("./detail/main")});
Simple.Module({name:"jiakao:router/base/assets",require:[]},function(e,t,n,s){var o=s.Router,c=function(e){return e=e.replace(/(^[^\/]+)\//gi,"$1:"),s.Module.path.source(e,null)},u=function(e,t){var n=c(e.path);n?t.send({code:200,type:"file",context:n}):t.send({code:404,context:"404"})};o.use(["/bbs/web-assets/*","/bbs/core-assets/*"],function(e,t){u(e,t)}),o.use(["/favicon.png","/favicon.ico"],function(e,t){t&&t.send({code:200,type:"file",context:"static:"+t.request.url.substring(1)})})});
Simple.Module({name:"jiakao:router/base/default",require:["../error"]},function(e,t,o,s){var r=s.Router,n=e("../error"),c=function(e){-1===e.request.headers.host.indexOf(".test.")?e.send({code:200,type:"file",context:s.Server.root+"../static/robots.txt"}):e.send({code:200,type:"file",context:s.Server.root+"../static/robots-test.txt"})};r.use("/api/mucang/monitor.htm",function(e,t){t&&t.send({code:200,type:"json",context:{success:!0,errorCode:0,message:null,data:"easy! it's ok => "+ +new Date}})}),r.use(function(e,t){var o,r;t&&(e||(e=""),e=e.split("?"),o=/\.\w+$/gi.exec(e[0]),"/robots.txt"===e[0]?c(t):o?(e[0]&&!/^\//.test(e[0])&&(e[0]=e[0].replace(/^([^\/]*)\//,"/")),t.send({code:200,type:"file",context:s.Server.root+"../static"+e[0],callback:function(e){e&&t.response.status(404).sendFile(s.Module.path.source("static:404.html",null))}})):"/"!==e[0].substr(-1)?(r=e[0].indexOf("/"),r>-1&&(e[0]=e[0].substr(r)),t.send({code:301,context:e[0]+"/"+(e[1]?"?"+e[1]:"")})):n.c404(e,t))})});
Simple.Module({name:"jiakao:router/club/main",require:["jiakao:application/club/main","jiakao:application/list/main"]},function(t,e,o,a){var n=(a.Utils,a.Router),s=t("jiakao:application/club/main"),c=t("jiakao:application/list/main"),p=function(t,e){var o=t[0],a=parseInt(t.substr(1));return"p"===o&&(!(!a||a<2)&&a)};n.use(["/bbs/","/bbs/:p/"],function(t,e){return t.search.page?void e.send({code:301,context:"/bbs/p"+t.search.page+"/"}):s.create({params:t,context:e}).render()},{p:p}),n.use(["/bbs/club/:options/"],function(t,e){return t.search.t?void e.send({code:301,context:"/bbs/"+t.path.options.clubId+"-t1/"+(t.search.page?"p"+t.search.page+"/":"")}):t.search.page?void e.send({code:301,context:"/bbs/"+t.path.options.clubId+"/p"+t.search.page+"/"}):void e.send({code:301,context:"/bbs/"+t.path.options.clubId+"/"})},{options:function(t,e){var o=t.split("-");return{clubId:o[0],t:o[1]&&o[1].substr(1)}}}),n.use(["/bbs/:options/","/bbs/:options/:p/"],function(t,e){return t.search.t?void e.send({code:301,context:"/bbs/"+t.path.options.clubId+"-t1/"+(t.search.p?"p"+t.search.p+"/":"")}):t.search.p?void e.send({code:301,context:"/bbs/"+t.path.options.clubId+"/p"+t.search.p+"/"}):c.create({params:t,context:e}).render()},{options:function(t,e){var o=t.split("-");return{clubId:o[0],t:o[1]&&o[1].substr(1)}},p:p})});
Simple.Module({name:"jiakao:router/detail/main",require:["jiakao:application/detail/main"]},function(t,e,i,r){var n=r.Router,a=t("jiakao:application/detail/main"),o=function(t,e){var i;if(!t)return!1;if(!e||0===e.lenght)return!1;e.push("id");for(i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&-1===e.indexOf(i))return!1;return!0},p=function(t){var e,i,r,n={},a=t.split("-");for(n.id=a[0],e=1;e<a.length;e++)a[e]&&(i=a[e].substr(0,1),r=a[e].substr(1),n[i]=r);return n};n.use("/bbs/topic/:options.html",function(t,e){return t.search.page?void e.send({code:301,context:"/bbs/topic/"+t.path.options.id+"-p"+t.search.page+".html"}):a.create({params:t,context:e}).render()},{options:function(t,e){var i=p(t);return!!o(i,["a","p"])&&(!!i.id.match(/^\d+$/)&&(!(i.p&&!i.p.match(/^\d+$/))&&i))}})});